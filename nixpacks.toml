# Nixpacks configuration for Laravel + Vue 3 SPA
# Simplified version - Coolify will detect Laravel automatically

[phases.install]
cmds = [
    "mkdir -p /var/log/nginx && mkdir -p /var/cache/nginx",
    "composer install --ignore-platform-reqs",
    "npm ci"
]

[phases.build]
cmds = [
    "npm run build",
    "composer install --no-dev --optimize-autoloader",
    "php artisan optimize",
    "php artisan config:cache",
    "php artisan route:cache",
    "php artisan view:cache"
]

[start]
cmd = "/assets/start.sh"
